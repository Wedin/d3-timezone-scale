!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-scale")):"function"==typeof define&&define.amd?define(["exports","d3-scale"],t):t(n.d3=n.d3||{},n.d3Scale)}(this,function(n,m){"use strict";n.scaleTimezone=function(n){var t,e,u,o,i,f,p,v,y,a,g=require("moment-timezone"),r=require("chronological");function c(t,r,e){return function(){var n=e.apply(r,arguments);return n===r?t:n}}return g=r(g),o=function(n){return g.isMoment(n)?n.valueOf():g.isDate(n)?n.getTime():n},e=function(n){return[n[0],n[n.length-1]]},a=["y","M","w","d","h","m","s"],v=function(n,t){var r,e,u;for(r=0,e=a.length;r<e;r++)if(u=a[r],t/2<=n[1].diff(n[0],u))return u;return"ms"},y=function(n){var t=a.indexOf(n);if(t)return 0===t?n:a[t-1]},f=function(n){return n<1?1:Math.pow(10,Math.round(Math.log(n)/Math.LN10))},i={s:[1,5,15,30,60],m:[1,5,15,30,60],h:[1,3,6,12,24],d:[1,2,3,5,10],w:[1,2,3,4,5,6],M:[1,3,6,12],y:[1,5,10,25,50,100,250,500,1e3]},p=function(n,t){var r;return"ms"===t?f(n):(r=n,i[t].map(function(n){return[n,Math.abs(n-r)]}).reduce(function(n,t){return n[1]<t[1]?n:t},[-1,999])[0])},u={ms:function(n){return n.valueOf()+"ms"},s:function(n){return n.format("HH:mm:ss")},m:function(n){return n.format("h:mma")},h:function(n){return n.format("D MMM ha")},d:function(n){return n.format("D MMM")},w:function(n){return n.format("D MMM")},M:function(n){return n.format("D MMM")},y:function(n){return n.format("D MMM")}},(t=function(r,l){var h;return null==l&&(l="UTC"),(h=function(n){return r(o(n))}).invert=function(n){return r.invert(n)},h.domain=function(n){return arguments.length?(r.domain(n.map(o)),h):r.domain().map(function(n){return g(n).tz(l)})},h.nice=function(n){var t;return t=e(r.domain()),r.domain([n.before(g(t[0])),n.after(g(t[1]))]),h},h.ticks=function(n){var t,r,e,u,o,i,f,a;e=h.domain(),a=v(e,n),t=g().tz(l).startOf("s").startOf(a),r=e[1].diff(e[0],a),r=p(r/=n,a),o=t.every(r,a);var c=y(a),m=g(t).startOf(c),d=Math.abs(t.diff(m,a)),s=g(t).startOf(c).add(1,c),M=Math.abs(t.diff(s,a));return(d<=r||M<=r)&&(o=(t=d<M?m:s).every(r,a)),f=Math.ceil(o.count(e[0])),(u=Math.floor(o.count(e[1])))<f?[]:function(){i=[];for(var n=f;f<=u?n<=u:u<=n;f<=u?n++:n--)i.push(n);return i}.apply(this).map(o.nth)},h.tickFormat=function(n){var t,r;return t=h.domain(),r=v(t,n),u[r]},h.copy=function(){return t(r.copy(),l)},h.testOutput=function(){return 42},function(n,t){for(var r,e=1,u=arguments.length;++e<u;)n[r=arguments[e]]=c(n,t,t[r]);return n}(h,r,"range","rangeRound","interpolate","clamp")})(m.scaleLinear(),n)},Object.defineProperty(n,"__esModule",{value:!0})});